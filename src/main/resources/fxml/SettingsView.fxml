<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:id="rootPane"
            fx:controller="SettingsController"
            styleClass="app-surface">

    <top>
        <HBox spacing="10" alignment="CENTER_LEFT"
              styleClass="header-bar">
            <padding>
                <Insets top="8" right="12" bottom="8" left="12"/>
            </padding>
            <Button text="â† Back"
                    styleClass="header-button"
                    onAction="#onBackClicked">
                <tooltip>
                    <Tooltip text="Return to live view"/>
                </tooltip>
            </Button>

            <Label text="Settings and Network"
                   styleClass="settings-header-title"/>

            <Pane HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true">
            <content>
                <VBox spacing="18">
                    <padding>
                        <Insets top="16" right="16" bottom="16" left="16"/>
                    </padding>

                    <TitledPane text="Notification behavior" expanded="true">
                        <content>
                            <VBox spacing="10">
                                <CheckBox fx:id="soundCheckBox"
                                          text="Play a sound when a notification is triggered"/>
                                <Label fx:id="soundHelpLabel"
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Label text="Notification sound:"/>
                                    <ChoiceBox fx:id="notificationSoundChoiceBox" prefWidth="180"/>
                                </HBox>

                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Label text="Emergency sound:"/>
                                    <ChoiceBox fx:id="emergencySoundChoiceBox" prefWidth="200"/>
                                </HBox>

                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Label text="Notification emoji:"/>
                                    <ChoiceBox fx:id="notificationEmojiChoiceBox" prefWidth="120"/>
                                </HBox>

                                <CheckBox fx:id="flashCheckBox"
                                          text="Flash screen red for emergency sounds"/>
                                <Label fx:id="flashHelpLabel"
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <HBox spacing="8" alignment="CENTER_LEFT">
                                    <Label text="Sensitivity:"/>
                                    <Slider fx:id="sensitivitySlider"
                                            prefWidth="260"
                                            min="0.05" max="0.9" value="0.20"/>
                                </HBox>
                                <Label fx:id="sensitivityHelpLabel"
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <Separator/>

                                <Label text="Per-sound notification colors"
                                       styleClass="settings-section-title"/>
                                <Label text="These colors are used for the status text and notifications when each sound is detected."
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <ScrollPane fitToWidth="true" prefHeight="200">
                                    <content>
                                        <VBox fx:id="notificationColorBox" spacing="6">
                                            <padding>
                                                <Insets top="8" right="8" bottom="8" left="8"/>
                                            </padding>
                                        </VBox>
                                    </content>
                                </ScrollPane>
                            </VBox>
                        </content>
                    </TitledPane>

                    <TitledPane text="Network broadcast" expanded="true">
                        <content>
                            <VBox spacing="12">
                                <Label text="When one Taptic Desktop hears a sound, it can tell the others on your local network."
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <Label text="Broadcast send"
                                       styleClass="settings-section-title"/>
                                <Label fx:id="broadcastSendHelpLabel"
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <ScrollPane fitToWidth="true" prefHeight="160">
                                    <content>
                                        <VBox fx:id="broadcastSendBox" spacing="6">
                                            <padding>
                                                <Insets top="10" right="10" bottom="10" left="10"/>
                                            </padding>
                                        </VBox>
                                    </content>
                                </ScrollPane>

                                <Label text="Broadcast listen"
                                       styleClass="settings-section-title"/>
                                <Label fx:id="broadcastListenHelpLabel"
                                       wrapText="true"
                                       styleClass="settings-help"/>

                                <ScrollPane fitToWidth="true" prefHeight="160">
                                    <content>
                                        <VBox fx:id="broadcastListenBox" spacing="6">
                                            <padding>
                                                <Insets top="10" right="10" bottom="10" left="10"/>
                                            </padding>
                                        </VBox>
                                    </content>
                                </ScrollPane>
                            </VBox>
                        </content>
                    </TitledPane>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
